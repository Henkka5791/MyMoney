{% extends 'layout.html' %}

{% block header %}
  <h1>{% block title %}Tapahtumat{% endblock %}</h1>
{% endblock %}

{% block header_2 %}Uusi{% endblock %}
{% block content_1 %}
<form action="/transactions" method="POST" enctype="multipart/form-data">
    <table>
    <tr>
        <td class="text-secondary">Summa:</td>
        <td><input class="w-5" type="TEXT" name="amount"></td>
    </tr>
    <tr>
        <td class="text-secondary">Kategoria:</td>
        <td><select name="category_subcategory">
            <option value="" selected disable hidden>Valitse Kategoria</option>
            {% for category_subcategory in categories_subcategories %}
            <option value="{{ category_subcategory[2] }}">{{ category_subcategory[0] }}: {{ category_subcategory[1] }}</option>
            {% endfor %}
            </select>
        </td>
    </tr>
    <tr>
        <td class="text-secondary">Lisätietoja:</td>
        <td><input type="TEXT" name="description">
    </tr>
    <tr>
        
        <td class="text-secondary">Kuitti:</td>
        <td>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="input-group">
    <label class="input-group-btn">
        <span class="btn btn-outline-secondary">
            Selaa&hellip; <input id="my-file-selector" class="file-input-box" type="file" name="file" style="display:none;" onchange="$('#upload-file-info').val($(this).val());">
        </span>
    </label>
    <input type="text" class="form-control" id="upload-file-info" readonly>
</div>
        </div>
        </td>     
    </tr>
    <tr>
        <td></td>
        <td><input class="btn btn-outline-secondary" type="submit" value="Tallenna"></td></td>
    </tr>
    </table>
</form>
{% endblock %}
{% block header_3 %}Viimeisimmät{% endblock %}
{% block content_2 %}
<table class="table table-striped table-bordered w-auto table-sm text-secondary">
    <tr>
        <th>Aika</th>
        <th>Summa €</th>
        <th>Kategoria</th>
        <th>Alakategoria</th>
        <th>Lisätietoja</th>
        <th></th>
        <th></th>
    </tr>
    {% for transaction in transactions_list %}
    <tr>
        <td>{{ transaction[0].strftime("%d.%m.%Y %H:%M") }}</td>
        <td>{{ transaction[1] }}</td> 
        <td>{{ transaction[2] }}</td>  
        <td>{{ transaction[3] }}</td>
        <td>{{ transaction[4] }}</td>
        <td>{% if transaction[6] is not none %}
            {{ transaction[6] }}
            {% else %}
            Ei kuvaa
            {% endif %}
        </td>
        <td><form action="/transactions/{{ transaction[5] }}" type ="GET"><input class="btn btn-outline-secondary btn-sm" type="submit" value="Muokkaa"></form></td>
        <td><form action="/transactions/{{ transaction[5] }}/remove" type ="POST"><input class="btn btn-outline-secondary btn-sm" type="submit" value="Poista"></form></td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
